<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Grow Garden (Demo)</title>
  <style>
    body { font-family: Arial, sans-serif; display:flex; gap:20px; padding:20px; }
    #garden { display:flex; gap:12px; flex-wrap:wrap; max-width:700px; }
    .pot { width:120px; height:160px; border:2px solid #666; border-radius:8px; padding:8px; box-sizing:border-box; background:#f7f7f7; display:flex; flex-direction:column; align-items:center; justify-content:flex-end; }
    .soil { width:100%; height:36px; background:#4b2f2f; border-radius:4px; margin-top:8px; }
    .plant { width:60px; transition: transform 0.3s; transform-origin: bottom center; }
    .controls { display:flex; flex-direction:column; gap:8px; }
    button { padding:8px 12px; cursor:pointer; }
    .status { margin-top:6px; font-size:12px; color:#333; }
  </style>
</head>
<body>
  <div id="garden"></div>

  <div class="controls">
    <button id="addPlant">Add plant</button>
    <button id="waterAll">Water all</button>
    <label>Speed:
      <select id="speed">
        <option value="1">Normal</option>
        <option value="2">Fast</option>
        <option value="0.5">Slow</option>
      </select>
    </label>
    <div style="width:220px;">
      <p style="margin:6px 0 2px 0"><strong>Instructions</strong></p>
      <ol style="padding-left:16px; margin:0; font-size:13px;">
        <li>Click Add plant</li>
        <li>Plants grow over time</li>
        <li>Click Water all to restore health</li>
      </ol>
    </div>
  </div>

  <script>
    // Simple plant model
    class Plant {
      constructor(id) {
        this.id = id;
        this.growth = 0; // 0..100
        this.health = 100; // 0..100
        this.element = null;
      }
      createElement() {
        const pot = document.createElement('div');
        pot.className = 'pot';
        pot.innerHTML = `
          <img class="plant" src="data:image/svg+xml;utf8,
            <svg xmlns='http://www.w3.org/2000/svg' width='120' height='120'>
              <g id='plant' transform='translate(30,80)'>
                <ellipse cx='30' cy='30' rx='28' ry='8' fill='%2340a040' />
                <rect x='24' y='-30' width='12' height='40' fill='%23308030' />
              </g>
            </svg>`; // inline SVG tiny plant
        const soil = document.createElement('div');
        soil.className = 'soil';
        pot.appendChild(soil);
        const status = document.createElement('div');
        status.className = 'status';
        status.textContent = `Growth: 0%  Health: 100%`;
        pot.appendChild(status);
        this.element = pot;
        this.statusEl = status;
        this.imgEl = pot.querySelector('.plant');
        return pot;
      }
      updateDisplay() {
        // scale plant with growth, tint based on health
        const scale = 0.5 + (this.growth / 100) * 1.5; // 0.5..2.0
        this.imgEl.style.transform = `scale(${scale})`;
        // health tint: greener when healthy, brown when low
        const g = Math.round(64 + (this.health/100) * 160);
        const r = Math.round(120 - (this.health/100) * 80);
        this.imgEl.style.filter = `drop-shadow(0 2px 0 rgba(0,0,0,0.2))`;
        this.statusEl.textContent = `Growth: ${Math.floor(this.growth)}%  Health: ${Math.floor(this.health)}%`;
      }
      tick(dt) {
        // dt in seconds
        // growth increases if health > 20
        if (this.health > 20) {
          this.growth = Math.min(100, this.growth + dt * 4); // growth speed
        }
        // health slowly drains unless watered recently
        this.health = Math.max(0, this.health - dt * 2);
        this.updateDisplay();
      }
      water() {
        this.health = Math.min(100, this.health + 35);
        this.updateDisplay();
      }
    }

    const gardenEl = document.getElementById('garden');
    const addBtn = document.getElementById('addPlant');
    const waterBtn = document.getElementById('waterAll');
    const speedSel = document.getElementById('speed');

    const plants = [];
    let lastTime = performance.now();

    function addPlant() {
      const p = new Plant(plants.length + 1);
      gardenEl.appendChild(p.createElement());
      p.updateDisplay();
      plants.push(p);
    }

    addBtn.addEventListener('click', addPlant);
    waterBtn.addEventListener('click', () => plants.forEach(p => p.water()));

    // spawn a couple to start
    addPlant();
    addPlant();

    function loop(now) {
      const dt = (now - lastTime) / 1000 * parseFloat(speedSel.value);
      lastTime = now;
      for (const p of plants) p.tick(dt);
      requestAnimationFrame(loop);
    }
    requestAnimationFrame(loop);
  </script>
</body>
</html>
